# gossip-appimage

A Nix flake which builds an AppImage of the Gossip Nostr client

## WORK-IN-PROGRESS

Currently, the AppImage builds but it doesn't run do to an issue with GLUT/OpenGL.

## Ingredients

1. The Nix package manager.

## Recipe

1. Install the Nix package manager with Nix flakes enabled (https://nixos.org/); If you don't know what I'm talking about, I recommend using the "default planner from https://github.com/DeterminateSystems/nix-installer which will take care of installing Nix with the needed configuration.
2. Using a terminal, run `nix build github:emmanuelrosa/gossip-appimage#gossip-appimage --impure`
3. Run `cp ./result ./Gossip.AppImage`
4. Run `chmod u+x Gossip.AppImage`

Now you can execute the `Gossip.AppImage`!

## How does it work?

The AppImage is generated by first taking the Gossip dep package and building a Nix package out of it. The package is located in my Nix flake https://github.com/emmanuelrosa/erosanix/tree/master/pkgs/gossip

Next, this Nix flake takes the aforementioned Gossip Nix package and wraps it with nixGL (https://github.com/nix-community/nixGL) which makes it possible to run Nix packages which need OpenGL, on a Linux distro other than NixOS.

Finally, the nix-appimage Nix flake (https://github.com/ralismark/nix-appimage) is used to build an AppImage using the nixGL-wrapped Gossip Nix package.
